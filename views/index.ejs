<!DOCTYPE html>
<html lang="en">
  <!-- head -->
  <%- include('./partials/head.ejs') %>
  <body class="d-flex flex-column min-vh-100">
    <!-- Nav -->
    <nav class="navbar bg-dark border-bottom border-body" data-bs-theme="dark">
      <h1 class="text-light ms-4 display-5 py-1">The Timeline</h1>
    </nav>
    <!-- End Nav -->

    <!-- Post Message -->
    <div class="container">
      <form action="/posts" method="POST">
        <label
          for="postMessage"
          class="form-control border-0 fs-1 text-center my-2"
          >Leave us some message:
        </label>
        <textarea
          name="post"
          id="postMessage"
          class="form-control"
          style="height: 120px"
          required
        ></textarea>
        <button type="submit" class="btn btn-primary mt-2">
          <i class="fa-solid fa-pen pe-2"></i>Post a message
        </button>
      </form>

      <h2 class="text-center my-1 text-secondary fw-light" id="allPosts">
        All Posts:
      </h2>
      <!-- Post Messages -->
      <div class="container mt-4 mb-4">
        <section>
          <div class="container my-2 py-2">
            <div class="row d-flex justify-content-center">
              <div class="col-md-12 col-lg-10 col-xl-8">
                <% posts.forEach(post => { %>
                <div class="card mb-3">
                  <div class="card-body">
                    <h3><%= post.name %></h3>
                    <p class="py-2 fs-5"><%= post.post %></p>
                    <small class="text-muted"
                      >Posted on <%= post.getDate %></small
                    >
                  </div>
                  <div class="card-footer py-3 border-0">
                    <div class="d-flex flex-start w-100">
                      <div class="form-outline w-100">
                        <textarea
                          class="form-control"
                          id="textAreaExample"
                          rows="4"
                        ></textarea>
                        <small>Message</small>
                      </div>
                    </div>
                    <div class="float-end mt-2 pt-1">
                      <a class="btn btn-primary btn-sm"> Post comment </a>
                      <a
                        href="/posts/delete/<%= post._id %>"
                        class="btn btn-outline-danger btn-sm"
                      >
                        Delete
                      </a>
                    </div>
                  </div>
                </div>
                <% }); %>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
    <!-- Footer -->
    <%- include('./partials/footer.ejs') %>
  </body>
</html>
